# POTAL AI Behavioral Guidelines & Absolute Rules (.cursorrules)

## 1. Business Philosophy (The "Why")
- **Target Audience:** US Residents (ë¯¸êµ­ í˜„ì§€ì¸). ì ˆëŒ€ í•œêµ­ì¸ì˜ ì§êµ¬ ê´€ì ìœ¼ë¡œ ë°°ì†¡/ì„œë¹„ìŠ¤ë¥¼ í•´ì„í•˜ì§€ ë§ˆë¼.
- **Transparency:** APIê°€ ì£¼ëŠ” ì •ë³´(ë„ì°©ì¼, ë°°ì†¡ë¹„)ëŠ” 100% íˆ¬ëª…í•˜ê²Œ ê³µê°œí•œë‹¤.
- **First Impression:** ì‚¬ìš©ìì—ê²Œ ë‘ ë²ˆì§¸ ê¸°íšŒëŠ” ì—†ë‹¤. ì²« 16ê°œ ìƒí’ˆ ë¦¬ìŠ¤íŠ¸ì™€ UIì—ì„œ ì••ë„ì ì¸ í¸ì˜ì„±ì„ ì œê³µí•´ì•¼ í•œë‹¤.
- **Clean UI:** ë°˜ë³µë˜ëŠ” íˆ´íŒ(Tooltip)ì€ ì‹œê°ì  ê³µí•´ë‹¤. ê°œë³„ íˆ´íŒì„ ì œê±°í•˜ê³  ìƒë‹¨ 'Unified Shipping Guide'ë¥¼ ì‚¬ìš©í•œë‹¤.

## 2. Anti-Amnesia (Do Not Forget / Zombie Ideas)
- **Mall Classification:** eBayì™€ iHerbëŠ” ë¯¸êµ­ì¸ì—ê²Œ **Domestic(ë‚´ìˆ˜)** ì‡¼í•‘ëª°ì´ë‹¤. ì ˆëŒ€ Global íƒ­ì— ë„£ì§€ ë§ˆë¼.
- **Show More Button:** 'Show More' ë²„íŠ¼ì€ í•„ìˆ˜ë‹¤. ì‚­ì œ ì œì•ˆ ê¸ˆì§€ (ë¬´í•œ ìŠ¤í¬ë¡¤ êµ¬í˜„).
- **Mobile Layout:** ëª¨ë°”ì¼ ê²€ìƒ‰ ê²°ê³¼ëŠ” **2ì—´(grid-cols-2)** ê·¸ë¦¬ë“œ. ìœ„ì‹œë¦¬ìŠ¤íŠ¸ë„ ë™ì¼.
- **Price Tag:** ë°°ì†¡ë¹„ê°€ 'Free'ì¸ ê²½ìš°, ê°€ê²© ì˜†ì— `+ Shipping` í…ìŠ¤íŠ¸ë¥¼ ì ˆëŒ€ ì¤‘ë³µ í‘œê¸°í•˜ì§€ ë§ˆë¼.
- **Data Driven:** í•„í„° ìƒì„± ì‹œ LLM ì¶”ë¡ ì„ ì‚¬ìš©í•˜ì§€ ë§ˆë¼. API ì‘ë‹µ ë°ì´í„° ê¸°ë°˜ìœ¼ë¡œ ìƒì„±í•œë‹¤.
- **Image Container:** ìƒí’ˆ ì¹´ë“œ ì´ë¯¸ì§€ëŠ” `paddingBottom: '125%' + height: 0` ì¸ë¼ì¸ ìŠ¤íƒ€ì¼ ë°©ì‹ìœ¼ë¡œ ê³ ì •. `aspectRatio` CSS ì‚¬ìš© ê¸ˆì§€.
- **Inline Styles ìš°ì„ :** Tailwind CSS ìºì‹± ì´ìŠˆë¡œ ì‹œê°ì  í•µì‹¬ ìš”ì†ŒëŠ” ë°˜ë“œì‹œ `style={{}}` ì¸ë¼ì¸ ìŠ¤íƒ€ì¼ ì‚¬ìš©.
- **No browser confirm():** ëª¨ë°”ì¼ì—ì„œ `confirm()`, `alert()`, `prompt()` ì‚¬ìš© ê¸ˆì§€. ë°”í…€ì‹œíŠ¸ ë˜ëŠ” ì»¤ìŠ¤í…€ ëª¨ë‹¬ UI ì‚¬ìš©.
- **Dark Theme í†µì¼:** ëª¨ë“  í˜ì´ì§€ ë°°ê²½ `#02122c`. ìƒˆ í˜ì´ì§€/ì»´í¬ë„ŒíŠ¸ ë§Œë“¤ ë•Œë„ ë„¤ì´ë¹„ ë‹¤í¬ í…Œë§ˆ ìœ ì§€.

## 3. Coding Standards
- **Grid System:** PC(Large Screen)ì—ì„œëŠ” **3ì—´(grid-cols-3)**ì„ ìµœëŒ€ë¡œ ìœ ì§€í•˜ì—¬ ìƒí’ˆ ì´ë¯¸ì§€ ì‹œì¸ì„±ì„ í™•ë³´í•œë‹¤.
- **Ranking Logic:** Domestic/Global íƒ­ ë‚´ë¶€ì—ì„œëŠ” ì‚¬ì´íŠ¸ë³„ 1ë“± ìƒí’ˆì„ **êµì°¨(Zipper)** ë°°ì¹˜í•˜ì—¬ ê³µì •ì„±ì„ ë³´ì¥í•œë‹¤.
- **z-index ê·œì¹™:** BottomNav z-[9999], í’€ìŠ¤í¬ë¦° ì‹œíŠ¸ z-[10001], Clear í™•ì¸ ë°”í…€ì‹œíŠ¸ z-[10002], StickyHeader z-[2000].
- **ëª¨ë°”ì¼/PC ë¶„ë¦¬:** `md:hidden` / `hidden md:block` íŒ¨í„´ ì‚¬ìš©. PC ë ˆì´ì•„ì›ƒì— ì˜í–¥ ì£¼ì§€ ì•Šë„ë¡ ì£¼ì˜.
- **Next.js 16:** `params`ê°€ Promise. ë™ì  ë¼ìš°íŠ¸ì—ì„œ `use(params)` ë˜ëŠ” `await params` ì‚¬ìš© í•„ìˆ˜.

## 4. ê²€ìƒ‰ ê²°ê³¼ ì¹´ë“œ êµ¬ì¡° (MobileCompactCard)
- **ì´ë¯¸ì§€ ì˜ì—­:** `paddingBottom: '125%'` + `height: 0` + `position: absolute` img
- **ì´ë¯¸ì§€ ìš°ì¸¡ìƒë‹¨:** ê³µìœ  ì•„ì´ì½˜(3-node ë„¤íŠ¸ì›Œí¬) + í•˜íŠ¸ ì•„ì´ì½˜ (ë°˜íˆ¬ëª… ì›í˜• ë°°ê²½)
- **ê°€ê²© ì˜ì—­ 3ì¤„ êµ¬ì¡°:**
  - 1ì¤„: ë©¤ë²„ì‹­ ë±ƒì§€ + ë°°ì†¡ë¹„(Free/+$X) + ğŸš€ + ë°°ì†¡ì¼
  - 2ì¤„: Est.Tax / Est.Duty
  - 3ì¤„: Total ê°€ê²© (êµµì€ ê¸€ì”¨)
- **ë±ƒì§€ 4ë‹¨ê³„ ìš°ì„ ìˆœìœ„:** membershipBadge â†’ shippingProg â†’ is_prime â†’ appliedMembership
- **ìœ„ì‹œë¦¬ìŠ¤íŠ¸ ì¹´ë“œë„ ë™ì¼ êµ¬ì¡°** ìœ ì§€ (WishlistMobileCard)

## 5. ì£¼ìš” íŒŒì¼ ë§¤í•‘
- `components/search/ResultsGrid.tsx` â€” ì‹¤ì œ ì‚¬ìš©í•˜ëŠ” ê²€ìƒ‰ ê²°ê³¼ ê·¸ë¦¬ë“œ (MobileCompactCard í¬í•¨)
- `app/components/search/` â€” ì•ˆ ì“°ëŠ” ë°±ì—… íŒŒì¼ (ìˆ˜ì •í•˜ì§€ ë§ˆë¼)
- `app/components/ProductCard.tsx` â€” PC ìƒí’ˆ ì¹´ë“œ
- `app/wishlist/page.tsx` â€” ìœ„ì‹œë¦¬ìŠ¤íŠ¸ (WishlistMobileCard + PC ProductCard)
- `app/lib/agent/Coordinator.ts` â€” ê²€ìƒ‰ íŒŒì´í”„ë¼ì¸ ì˜¤ì¼€ìŠ¤íŠ¸ë ˆì´ì…˜ (providerStatus í¬í•¨)
- `app/lib/retailerConfig.ts` â€” ë¦¬í…Œì¼ëŸ¬ ì„¤ì • + ë©¤ë²„ì‹­ ë±ƒì§€ ë§¤ì¹­
